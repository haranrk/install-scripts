#---Zsh plugins------------------
zplugin light chrissicool/zsh-256color
zplugin ice wait atload'_zsh_autosuggest_start'
zplugin light zsh-users/zsh-autosuggestions
zplugin light zdharma/fast-syntax-highlighting
zplugin light Valiev/almostontop

zplugin snippet OMZ::plugins/git/git.plugin.zsh
zplugin snippet OMZ::plugins/vi-mode/vi-mode.plugin.zsh
zplugin ice svn
zplugin snippet OMZ::plugins/z
zplugin snippet OMZ::plugins/osx/osx.plugin.zsh
zplugin snippet OMZ::plugins/tmux/tmux.plugin.zsh

#Prompt themes
#zplugin ice pick"async.zsh" src"pure.zsh"
#zplugin light sindresorhus/pure
#zplugin light romkatv/powerlevel10k
zplugin light dracula/zsh

#---Aliases------------------
alias ezsh="vim ~/.zshrc && source ~/.zshrc"
alias ezp="vim ~/.zsh_profile && source ~/.zshrc"
alias check-zsh-startup='time  zsh -i -c exit'
alias dl="conda activate dl"
alias vim="nvim"
alias duh="du -hs"
alias duhls='du -hs $(ls)'

#---General settings------------------
setopt no_share_history
unsetopt share_history
export LANG=en_US.UTF-8
export LC_CTYPE=en_US.UTF-8

#---Powerlevel9k settings-------------------
POWERLEVEL9K_MODE='nerdfont-complete'

POWERLEVEL9K_PROMPT_ON_NEWLINE=false
POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(ssh user dir anaconda root_indicator vcs newline os_icon )
POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(command_execution_time)

POWERLEVEL9K_DIR_SHOW_WRITABLE=true
POWERLEVEL9K_SHORTEN_DIR_LENGTH=2
POWERLEVEL9K_HOME_ICON=''
POWERLEVEL9K_HOME_SUB_ICON=''
POWERLEVEL9K_FOLDER_ICON=''
POWERLEVEL9K_ETC_ICON=''

POWERLEVEL9K_TIME_FORMAT="%D{%H:%M}"

POWERLEVEL9K_ANACONDA_LEFT_DELIMITER=''
POWERLEVEL9K_ANACONDA_RIGHT_DELIMITER=''

dir_fg='black'
dir_bg='006'
POWERLEVEL9K_OS_ICON_FOREGROUND=$dir_fg
POWERLEVEL9K_OS_ICON_BACKGROUND=$dir_bg
POWERLEVEL9K_USER_DEFAULT_FOREGROUND=$dir_bg
POWERLEVEL9K_USER_DEFAULT_BACKGROUND=$dir_fg
POWERLEVEL9K_COMMAND_EXECUTION_TIME_BACKGROUND=$dir_bg
POWERLEVEL9K_COMMAND_EXECUTION_TIME_FOREGROUND=$dir_fg
POWERLEVEL9K_DIR_HOME_BACKGROUND=$dir_bg
POWERLEVEL9K_DIR_HOME_FOREGROUND=$dir_fg
POWERLEVEL9K_DIR_HOME_SUBFOLDER_BACKGROUND=$dir_bg
POWERLEVEL9K_DIR_HOME_SUBFOLDER_FOREGROUND=$dir_fg
POWERLEVEL9K_DIR_DEFAULT_BACKGROUND='yellow'
POWERLEVEL9K_DIR_DEFAULT_FOREGROUND='006'

#source $ZSH/oh-my-zsh.sh
#---Cursor changes based on modes-------------------
# Activate vim mode.
bindkey -v

# Remove mode switching delay.
KEYTIMEOUT=5

# Change cursor shape for different vi modes.
function zle-keymap-select {
      if [[ ${KEYMAP} == vicmd ]] ||
         [[ $1 = 'block' ]]; then
        echo -ne '\e[1 q'

      elif [[ ${KEYMAP} == main ]] ||
           [[ ${KEYMAP} == viins ]] ||
           [[ ${KEYMAP} = '' ]] ||
           [[ $1 = 'beam' ]]; then
        echo -ne '\e[5 q'
      fi
}
zle -N zle-keymap-select

_fix_cursor() {
   echo -ne '\e[5 q'
}

precmd_functions+=(_fix_cursor)
